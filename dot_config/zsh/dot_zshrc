# Created by Zap installer
[ -f "${XDG_DATA_HOME:-${ZDOTDIR}/.local/share}/zap/zap.zsh" ] && source "${XDG_DATA_HOME:-$HOME/.local/share}/zap/zap.zsh"

# Autojump
[ -f /opt/homebrew/etc/profile.d/autojump.sh ] && . /opt/homebrew/etc/profile.d/autojump.sh

# Load and initialise completion system
autoload -Uz compinit
compinit

# plugins
plug "zap-zsh/fzf"
plug "aloxaf/fzf-tab"
plug "zsh-users/zsh-autosuggestions"
plug "zsh-users/zsh-syntax-highlighting"
plug "zsh-users/zsh-history-substring-search"

# ensure available
path+=("$HOME/.cargo/bin/")
path+=("/opt/homebrew/bin/mosh")
path+=("/opt/homebrew/bin/mosh-server")
path+=("/opt/homebrew/bin/mosh-client")
path+=("/usr/local/bin/viu")
path+=("/usr/local/bin/ueberzug")
path+=("/usr/local/bin/chafa")

# for the odd project with compatibility issues
if [[ $(arch) == arm64 ]]; then
    path+=("$HOME/.pyenv/shims")
    export PYENV_ROOT="$HOME/.pyenv"
else
    path+=("$HOME/.pyenv-i386/shims")
    export PYENV_ROOT="$HOME/.pyenv-i386"
fi
export PATH

export BAT_THEME="base16-256"
export DYLD_LIBRARY_PATH="$(brew --prefix)/lib:$DYLD_LIBRARY_PATH"

# Don't think these are needed anymore...
# export LDFLAGS="-L/opt/homebrew/opt/llvm/lib"
# export CPPFLAGS="-I/opt/homebrew/opt/llvm/include"

test -e "${ZDOTDIR}/.iterm2_shell_integration.zsh" && source "${ZDOTDIR}/.iterm2_shell_integration.zsh"

source <(fzf --zsh)

source "${ZDOTDIR}/aliases.zsh"
source "${ZDOTDIR}/functions.zsh"
source "${ZDOTDIR}/cmp-sources/cmp-glow.zsh"
source "${ZDOTDIR}/cmp-sources/fzf.zsh"
source "${ZDOTDIR}/keys.zsh"

eval "$(starship init zsh)"
eval "$(zoxide init zsh)"
