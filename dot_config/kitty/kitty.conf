# vim:fileencoding=utf-8:foldmethod=marker

env BIN_PATH=/opt/homebrew/bin/

# Term options {{{
term                                xterm-kitty
shell_integration                   yes
startup_session                     none
allow_remote_control                yes
listen_on                           unix:/tmp/mykitty
confirm_os_window_close             -1
scrollback_lines                    2000
scrollback_pager_history_size       20000
copy_on_select                      yes
paste_actions                       quote-urls-at-prompt
strip_trailing_spaces               never
allow_hyperlinks                    yes
show_hyperlink_targets              yes
macos_option_as_alt                 both
macos_quit_when_last_window_closed  yes
enabled_layouts                     splits,stack
repaint_delay                       10
sync_to_monitor                     yes
remote_kitty                        if-needed
# }}}

# Keymaps {{{
# Window make & nav
kitty_mod ctrl+shift

map ctrl+escape close_window

map ctrl+/ layout_action rotate
map ctrl+. layout_action bias 65
map ctrl+, layout_action bias 35
map ctrl+- launch --location=hsplit --cwd=last_reported
map ctrl+| launch --location=vsplit --cwd=last_reported

map ctrl+up             neighboring_window                up
map ctrl+right          neighboring_window                right
map ctrl+down           neighboring_window                down
map ctrl+left           neighboring_window                left

map kitty_mod+up        kitten        relative_resize.py  up    3
map kitty_mod+right     kitten        relative_resize.py  right 3
map kitty_mod+down      kitten        relative_resize.py  down  3
map kitty_mod+left      kitten        relative_resize.py  left  3


# Neovim integration
map --when-focus-on var:IS_NVIM ctrl+left
map --when-focus-on var:IS_NVIM ctrl+down
map --when-focus-on var:IS_NVIM ctrl+up
map --when-focus-on var:IS_NVIM ctrl+right

map --when-focus-on var:IS_NVIM kitty_mod+left
map --when-focus-on var:IS_NVIM kitty_mod+down
map --when-focus-on var:IS_NVIM kitty_mod+up
map --when-focus-on var:IS_NVIM kitty_mod+right

# Tabs
# map ctrl+space next_tab
map ctrl+tab next_tab
map kitty_mod+n launch --type=tab --cwd=last_reported
map kitty_mod+t set_tab_title
map ctrl+1                   goto_tab 1
map ctrl+2                   goto_tab 2
map ctrl+3                   goto_tab 3
map ctrl+4                   goto_tab 4
map ctrl+5                   goto_tab 5
map ctrl+6                   goto_tab 6
map ctrl+7                   goto_tab 7
map ctrl+8                   goto_tab 8
map ctrl+9                   goto_tab 9

# Utils
map kitty_mod+z kitten zoom_toggle.py
map kitty_mod+s kitten ~/.local/share/nvim/lazy/kitty-scrollback.nvim/python/kitty_scrollback_nvim.py
map kitty_mod+k kitten print_keymaps.py
map kitty_mod+r launch --cwd=last_reported --copy-env --location=before --bias=35 --hold --dont-take-focus radian
map kitty_mod+p launch --cwd=last_reported --copy-env --location=before --bias=35 --hold --dont-take-focus ptpython
map kitty_mod+o launch --cwd=last_reported --copy-env --type=tab opencode --continue
map kitty_mod+m launch --cwd=~/.local/share/chezmoi/dot_config/ --copy-env --type=tab --hold nvim
map kitty_mod+l kitten meow/projects.py load --dir $HOME/Documents/Projects/Python/ --dir $HOME/Documents/Projects/R/

map ctrl+(  change_font_size current   -0.5
map ctrl+)  change_font_size current   +0.5
map ctrl+{  set_background_opacity     -0.05
map ctrl+}  set_background_opacity     +0.05
# }}}

# Aesthetics {{{

# Font composition
# air: 17 | dell: 17.5 | ktc: 18
font_size                   18
# options: platform | legacy | gamma (0.01+) contrast (0-100)
text_composition_strategy   platform
modify_font                 cell_width 100%
modify_font                 cell_height 100%
font_family                 Maple Mono NF
bold_font                   Maple Mono NF Semibold
italic_font                 Maple Mono NF Italic
bold_italic_font            Maple Mono NF Semibold Italic

# Windows
placement_strategy          center
window_border_width         1.0pt
window_padding_width        0 5
hide_window_decorations     titlebar-only
background_opacity          0.95
dynamic_background_opacity  yes
inactive_text_alpha         0.75

# Cursor animations
cursor_trail                    1
cursor_blink_interval           0.8
mouse_hide_wait                 -1

# Tab bar stylings
tab_bar_style                   custom
tab_fade                        0 0 0 0
tab_bar_edge                    bottom
tab_bar_align                   center
tab_bar_margin_width            0
tab_bar_margin_height           1.0 1.0
active_tab_font_style           Bold
inactive_tab_font_style         Light
tab_bar_min_tabs                2
tab_activity_symbol             none
bell_on_tab                     no
tab_title_template              "{' ' if layout_name == 'stack' else ' '} {index}:{f'{title[:8]}' if title.rindex(title[-1]) + 1 > 10 else title}"
active_tab_title_template       "{' ' if layout_name == 'stack' else ' '} {index}:{f'{title[:8]}' if title.rindex(title[-1]) + 1 > 10 else title}"

# Colors
# options default | srgb | displayp3
macos_colorspace                    default
text_fg_override_threshold          1.2 ratio
include amber.conf
include zenburn-16-255.conf
# }}}


